<div id="companylist" v-cloak>

 <!-- Delete modal dialog -->
 <modal class="modal fade delete-modal" v-if="deleteModalOpen" @close="closeModal()" v-cloak>
  <div class="modal-header">
    <h5 class="modal-title">Are you sure you want to remove this company?</h5>
    <!-- <button type="button" class="modal-close-button" data-dismiss="modal" aria-label="Close">
      <img src="/images/close-white.svg" alt="" class="img-fluid">
    </button> -->
  </div>

  <div class="modal-body">
    <span v-if="data[clickedIndex].name">Company Name: <b>{{data[clickedIndex].name}}</b></span>
  </div>

  <div class="modal-footer">
    <button type="button" class="btn btn-border mr-3" data-dismiss="modal">Cancel</button>
    <button type="button"  @click="deleteCompany(clickedIndex)" class="btn btn-dark ml-3">
      <i class="fa fa-circle-o-notch fa-spin fa-fw" v-if="loading"></i>
      <span v-if="!loading">Delete</span>
    </button>
  </div> 
</modal>
<!-- Delete modal dialog -->

<div class="container container-lg">
  <div class="row">
    <h1>Company List</h1>
  </div>
  <div class="row mt-5">
    <div class="col-md-10"></div>
    <div class="col-md-2 text-right">
      <a href="/admin/company/create" class="btn btn-dark mb-2 ml-auto" style="color: rgb(250, 250, 250)">+ Create new</a>
    </div>
  </div>

  <table class="table table-striped mb-4">
    <thead class="table-head">
      <tr>
        <th style="width: 40%;">Company name</th>
        <th style="width: 40%;">Contact number</th>
        <th style="width: 10%;"></th>
        <th class="text-center" style="width:10%"></th>
      </tr>
    </thead>
    <tbody>
      <tr v-for="(item, index) in data">
        <td><a v-bind:href="itemView+item.id">{{item.name}}</a></td>
        <td>{{item.number}}</td>
        <td></td>
        <td class="text-right">
          <div class="btn-group btn-group-toggle btn-group-sm" data-toggle="buttons">
            <label class="btn" @click="modalOpen(index)">
              <img src="/images/bin.svg" alt="trash-bin" class="img-fluid">
            </label>
          </div>
        </td>
      </tr>
    </tbody>
    <tfoot v-if="data.length == 0 ">
      <tr>
        <td colspan="4" class="text-center p-5">
          <br>
          <img src="/images/sad.svg" class="img-fluid mx-auto" alt="" width="20px">
          <small>No Data Found</small>
          <br>
        </td>
      </tr>
    </tfoot>
  </table>
</div>
</div>
<%- /* Expose server-rendered data as window.SAILS_LOCALS :: */ exposeLocalsToBrowser() %>
